<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>عيد ميلاد سعيد - Azola 🎂💕</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); /* Dark blue/purple gradient */
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            transition: background 2s ease;
        }

        body.celebrating {
            animation: celebrationLights 3s infinite alternate; /* Gentle light animation */
        }

        @keyframes celebrationLights {
            0% {
                background: linear-gradient(135deg, rgba(255, 0, 110, 0.01) 0%, #16213e 50%, #1a1a2e 100%);
            }
            50% {
                background: linear-gradient(135deg, #1a1a2e 0%, rgba(255, 190, 11, 0.01) 50%, #16213e 100%);
            }
            100% {
                background: linear-gradient(135deg, rgba(0, 245, 255, 0.01) 0%, #1a1a2e 50%, #16213e 100%);
            }
        }

        .container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Cake Design - Inspired by the provided image */
        .cake-container {
            position: relative;
            width: 300px;
            height: 250px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            z-index: 5;
        }

        .cake-base {
            position: absolute;
            bottom: 0;
            width: 200px;
            height: 100px;
            background-color: #5D4037; /* Brown for cake */
            border-radius: 50% / 10px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
            opacity: 0;
            animation: cakeAppear 1s ease-out forwards;
            z-index: 5;
        }

        @keyframes cakeAppear {
            0% { opacity: 0; transform: scale(0.5) translateY(50px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }

        .cake-top {
            position: absolute;
            top: -10px;
            width: 210px;
            height: 20px;
            background-color: #F5DEB3; /* Cream color */
            border-radius: 50%;
            box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.1);
            z-index: 6;
        }

        .cake-drip {
            position: absolute;
            top: 10px;
            left: 0;
            width: 100%;
            height: 30px;
            background-color: #F5DEB3; /* Cream color */
            z-index: 7;
            clip-path: polygon(0 0, 100% 0, 100% 50%, 90% 60%, 80% 50%, 70% 65%, 60% 50%, 50% 70%, 40% 50%, 30% 60%, 20% 50%, 10% 65%, 0% 50%);
        }
        
        /* Candle Design */
        .candle-container {
            position: absolute;
            top: -100px; /* Start high above */
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            animation: candleDescend 1s ease-out 1s forwards; /* Descend after 1s */
            cursor: pointer;
            z-index: 10;
        }

        @keyframes candleDescend {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(-150px);
            }
            100% {
                opacity: 1;
                transform: translateX(-50%) translateY(-100px); /* Position directly above the cake */
            }
        }

        .candle {
            width: 20px;
            height: 80px;
            background: linear-gradient(to top, #fffacd, #f0e68c); /* Yellowish white */
            border-radius: 5px;
            position: relative;
            box-shadow: inset -2px 0 5px rgba(0, 0, 0, 0.2), 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .candle::before {
            content: '';
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 8px;
            background-color: #8B4513; /* Wick color */
            border-radius: 2px;
        }

        .flame {
            position: absolute;
            width: 18px;
            height: 40px;
            background: linear-gradient(to top, #ff6b00, #ffd700, #ffff00);
            border-radius: 50% 50% 50% 0;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            animation: flameFlicker 0.3s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(255, 200, 0, 0.5), 0 0 20px rgba(255, 100, 0, 0.2);
        }

        .flame.lit {
            opacity: 1;
        }

        @keyframes flameFlicker {
            0%, 100% { transform: translateX(-50%) scaleY(1); }
            50% { transform: translateX(-50%) scaleY(1.1); }
        }

        /* Title and Signature */
        .title {
            font-size: 3.5em;
            color: #ffb6c1;
            text-shadow: 0 0 20px rgba(255, 182, 193, 0.5);
            margin-bottom: 40px;
            font-weight: bold;
            opacity: 0;
            animation: titleAppear 1s ease-out forwards;
            font-family: 'Great Vibes', cursive; /* Elegant font */
        }

        @keyframes titleAppear {
            0% { opacity: 0; transform: translateY(-30px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .signature {
            font-size: 1.5em;
            color: #ffb6c1;
            text-align: center;
            margin-top: 40px;
            opacity: 0;
            animation: signatureAppear 1s ease-out forwards;
            animation-delay: 0.5s;
            font-family: 'Dancing Script', cursive;
        }

        @keyframes signatureAppear {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Emoji Rain */
        .emoji {
            position: fixed;
            font-size: 2.5em;
            pointer-events: none;
            z-index: 5;
            animation: fall 3s linear forwards;
        }

        @keyframes fall {
            0% {
                opacity: 1;
                transform: translateY(-50px) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Envelope/Card Container - New Interactive Element */
        .envelope-container {
            position: absolute;
            top: -100px; /* Start high above */
            left: 50%;
            transform: translateX(-50%);
            width: 250px;
            height: 150px;
            opacity: 0;
            cursor: pointer;
            z-index: 50;
            transition: transform 1s ease-out;
        }

        .envelope-container.descend {
            animation: envelopeDescend 1s ease-out 1.5s forwards; /* Descend after 1.5s */
        }

        @keyframes envelopeDescend {
            0% { opacity: 0; transform: translateX(-50%) translateY(-100px); }
            100% { opacity: 1; transform: translateX(-50%) translateY(150px); /* Settles below the cake */ }
        }

        .envelope {
            width: 100%;
            height: 100%;
            background-color: #fff; /* White envelope */
            border: 2px solid #ffc0cb;
            border-radius: 10px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.5s ease;
        }

        .envelope.open {
            transform: scale(1.5);
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background-color: #ffc0cb; /* Pink flap */
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            transform-origin: top;
            transition: transform 0.5s ease;
        }

        .envelope.open .envelope-flap {
            transform: rotateX(180deg);
        }

        /* Message Card Inside Envelope */
        .card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            width: 90%;
            height: 90%;
            background: linear-gradient(135deg, #fff0f5 0%, #ffe4e1 100%);
            border-radius: 5px;
            padding: 15px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
            pointer-events: none;
        }

        .envelope.open .card {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }

        .card-message {
            font-size: 1em;
            line-height: 1.6;
            color: #333;
            font-family: 'Georgia', serif;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .card-signature {
            font-size: 1em;
            color: #ff1493;
            margin-top: 10px;
            font-weight: bold;
            font-family: 'Dancing Script', cursive;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .title { font-size: 2em; }
            .signature { font-size: 1.2em; }
            .cake-base { width: 150px; height: 75px; }
            .cake-top { width: 160px; }
            .candle-container { transform: translateX(-50%) translateY(-70px); }
            .candle { width: 15px; height: 60px; }
            .flame { width: 15px; height: 30px; top: -25px; }
            .envelope-container { width: 200px; height: 120px; }
            @keyframes envelopeDescend {
                0% { opacity: 0; transform: translateX(-50%) translateY(-100px); }
                100% { opacity: 1; transform: translateX(-50%) translateY(100px); }
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Happy Birthday, Azola!</div>

        <div class="cake-container">
            <div class="cake-base"></div>
            <div class="cake-top"></div>
            <div class="cake-drip"></div>
            <div class="candle-container" id="candleContainer">
                <div class="candle">
                    <div class="flame" id="flame"></div>
                </div>
            </div>
        </div>

        <div class="signature">
            Your dear Hassan 🫂🎉
        </div>
    </div>

    <!-- Envelope/Message Card -->
    <div class="envelope-container" id="envelopeContainer">
        <div class="envelope" id="envelope">
            <div class="envelope-flap"></div>
            <div class="card" id="card">
                <div class="card-message" id="cardMessage"></div>
                <div class="card-signature">حسنك المحب 💌</div>
            </div>
        </div>
    </div>

    <audio id="backgroundMusic" loop>
        <source src="romantic_piano.mp3" type="audio/mpeg">
    </audio>

    <script>
        let candleLit = false;

        // Function to light the candle and trigger effects
        function lightCandle() {
            if (candleLit) return;
            candleLit = true;

            const flame = document.getElementById('flame');
            flame.classList.add('lit');

            // Play music after 5 seconds
            setTimeout(() => {
                const music = document.getElementById('backgroundMusic');
                // Check if the music file is loaded and ready
                if (music.readyState >= 2) {
                    music.play().catch(error => {
                        console.error("Autoplay failed:", error);
                        // Fallback: Ask user to interact to play music if autoplay is blocked
                        // For this task, we rely on the fact that the user already interacted
                    });
                } else {
                    music.oncanplaythrough = () => {
                        music.play().catch(error => console.error("Autoplay failed after load:", error));
                    };
                }
            }, 5000);

            // Activate subtle celebration lights
            document.body.classList.add('celebrating');

            // Start emoji rain after 1.5 seconds
            setTimeout(() => {
                startEmojiRain();
            }, 1500);

            // Start envelope descent after 1.5 seconds
            setTimeout(() => {
                document.getElementById('envelopeContainer').classList.add('descend');
            }, 1500);
        }

        // Function to start emoji rain
        function startEmojiRain() {
            const emojis = ['🎉', '🎊', '🎂', '🎀', '🎁', '🎇', '🎆', '🫂'];

            function createEmoji() {
                const emoji = document.createElement('div');
                emoji.className = 'emoji';
                emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                emoji.style.left = Math.random() * 100 + '%';
                emoji.style.top = '-50px';
                emoji.style.animation = `fall ${2 + Math.random() * 1.5}s linear forwards`;
                
                document.body.appendChild(emoji);
                
                setTimeout(() => {
                    emoji.remove();
                }, 3500);
            }

            // Create emojis continuously
            setInterval(() => {
                if (candleLit) {
                    createEmoji();
                } 
            }, 300);
        }

        // Function to open the envelope
        function openEnvelope() {
            const envelope = document.getElementById('envelope');
            const messageText = `ميلادُكِ فلكٌ يحدثُ مرّةً،
وفيه خُلقتِ أجملَ امرأةٍ،
ميلادُكِ يومٌ، وبعينَيَّ سنةٌ،
وما غيرُكِ في يومِ ميلادِكِ حسنةٌ.

هنيئًا لكِ العيدُ الذي أنتِ عيدُه،
وأنتِ من فيضِ البهاءِ تزيدُه،
وإنّي إذا أهدى لكِ غيري وردةً،
سأهديكِ قلبًا، أنتِ فيهِ وريدُه.`;
            
            document.getElementById('cardMessage').textContent = messageText;
            envelope.classList.add('open');
        }

        // Add click event to candle
        document.getElementById('candleContainer').addEventListener('click', lightCandle);
        
        // Add click event to envelope
        document.getElementById('envelopeContainer').addEventListener('click', openEnvelope);
    </script>
</body>
</html>

